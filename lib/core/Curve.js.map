{"version":3,"sources":["core/Curve.js"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;;IAAY,K;;AAEZ;;AACA;;AACA;;;;;;IAEM,K;;;;;;;;;AAMJ,iBAAY,MAAZ,EAAoB;AAAA;;AAAA;;AAAA,uGACZ;AACJ,aAAO,KADH;AAEJ,cAAQ;AAFJ,KADY;;AAMlB,+FAAgB,MAAhB;;AAEA,QAAM,WAAW,IAAI,MAAM,QAAV,EAAjB;AACA,aAAS,QAAT,GAAoB,OAAO,KAAP,CAAa,SAAb,CAAuB,OAAO,MAA9B,CAApB;;AAEA,QAAM,QAAQ,IAAI,MAAM,IAAV,CACZ,QADY,EAEZ,uBAAa,OAAO,QAApB,EAA8B,KAA9B,EAAqC,SAFzB,CAAd;;AAKA,UAAK,SAAL,CAAe,KAAf;;AAEA,QAAM,QAAQ,OAAO,MAAP,QAAoB;AAChC,YAAM;AAD0B,KAApB,CAAd;;AAIA,UAAM,SAAN,CAAgB,MAAM,KAAtB;;AAEA,kBAAO,KAAP;AACD;;;;;;;;;0BAKK,M,EAAQ;AACZ,UAAM,SAAS,IAAf;AACA,aAAO,MAAP,GAAgB,MAAhB;;AAEA,aAAO,IAAI,OAAJ,CAAY,UAAC,OAAD,EAAU,MAAV,EAAqB;AACtC,YAAI;AACF,iBAAO,MAAP,CAAc,QAAd,GAAyB,GAAzB,CAA6B,OAAO,SAAP,EAA7B;AACA,iBAAO,MAAP,CAAc,QAAd,CAAuB,IAAvB,CAA4B,MAA5B;AACD,SAHD,CAGE,OAAO,GAAP,EAAY;AACZ,kBAAQ,KAAR,CAAc,IAAI,OAAlB;AACA;AACD,SAND,SAMU;AACR,cAAI,mBAAS,KAAb,EAAoB;AAClB,oBAAQ,KAAR,wBACuB,OAAO,KAD9B,2BAEE,CAAC,MAAD,EAAS,OAAO,MAAhB,CAFF;AAID;;AAED,kBAAQ,MAAR;AACD;AACF,OAjBM,CAAP;AAkBD;;;;;;;;4BAKO;AACN,aAAO,IAAI,KAAJ,CAAU,KAAK,QAAf,EAAyB,IAAzB,CAA8B,IAA9B,CAAP;AACD;;;;;;;;;;yBAOI,M,EAAQ;AACX,WAAK,SAAL,CAAe,OAAO,SAAP,GAAmB,KAAnB,EAAf;;AAEA,WAAK,KAAL,GAAa,OAAO,KAApB;;AAEA,aAAO,IAAP;AACD;;;;;;;;;;6BAOQ;AACP,WAAK,MAAL,CAAY,QAAZ,GAAuB,MAAvB,CAA8B,KAAK,SAAL,EAA9B;;AAEA,WAAK,MAAL,CAAY,QAAZ,CAAqB,MAArB,CAA4B,KAAK,MAAL,CAAY,QAAZ,CAAqB,OAArB,CAA6B,IAA7B,CAA5B,EAAgE,CAAhE;AACA,WAAK,MAAL,GAAc,IAAd;;AAEA,WAAK,IAAL,CAAU,QAAV;;AAEA,UAAI,mBAAS,KAAb,EAAoB;AAClB,gBAAQ,KAAR,wBACuB,KAAK,KAD5B,8BAEE,CAAC,MAAD,CAFF;AAID;;AAED,aAAO,IAAP;AACD;;;;;QAID,K,GAAA,K","file":"Curve.js","sourcesContent":["import * as THREE from 'three';\r\n\r\nimport {loadMaterial} from '../extras/api';\r\nimport {defaults} from '../utils/defaults';\r\nimport {WHSObject} from './Object';\r\n\r\nclass Curve extends WHSObject {\r\n  /**\r\n   * Create curve.\r\n   *\r\n   * Todo\r\n   */\r\n  constructor(params) {\r\n    super({\r\n      curve: false,\r\n      points: 50\r\n    });\r\n\r\n    super.setParams(params);\r\n\r\n    const geometry = new THREE.Geometry();\r\n    geometry.vertices = params.curve.getPoints(params.points);\r\n\r\n    const curve = new THREE.Line(\r\n      geometry,\r\n      loadMaterial(params.material, false)._material\r\n    );\r\n\r\n    this.setNative(curve);\r\n\r\n    const scope = Object.assign(this, {\r\n      type: 'curve'\r\n    });\r\n\r\n    scope.setNative(param.curve);\r\n\r\n    return scope;\r\n  }\r\n\r\n    /**\r\n     * Add curve to scene.\r\n     */\r\n  addTo(parent) {\r\n    const _scope = this;\r\n    _scope.parent = parent;\r\n\r\n    return new Promise((resolve, reject) => {\r\n      try {\r\n        _scope.parent.getScene().add(_scope.getNative());\r\n        _scope.parent.children.push(_scope);\r\n      } catch (err) {\r\n        console.error(err.message);\r\n        reject();\r\n      } finally {\r\n        if (defaults.debug) {\r\n          console.debug(\r\n            `@WHS.Curve: Curve ${_scope._type} was added to world.`,\r\n            [_scope, _scope.parent]\r\n          );\r\n        }\r\n\r\n        resolve(_scope);\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Clone curve.\r\n   */\r\n  clone() {\r\n    return new Curve(this.__params).copy(this);\r\n  }\r\n\r\n  /**\r\n   * Copy curve.\r\n   *\r\n   * @param {WHS.Curve} source - Source object, that will be applied to this.\r\n   */\r\n  copy(source) {\r\n    this.setNative(source.getNative().clone());\r\n\r\n    this._type = source._type;\r\n\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Remove this curve from world.\r\n   *\r\n   * @return {WHS.Curve} - this.\r\n   */\r\n  remove() {\r\n    this.parent.getScene().remove(this.getNative());\r\n\r\n    this.parent.children.splice(this.parent.children.indexOf(this), 1);\r\n    this.parent = null;\r\n\r\n    this.emit('remove');\r\n\r\n    if (defaults.debug) {\r\n      console.debug(\r\n        `@WHS.Curve: Curve ${this._type} was removed from world`,\r\n        [_scope]\r\n      );\r\n    }\r\n\r\n    return this;\r\n  }\r\n}\r\n\r\nexport {\r\n  Curve\r\n};\r\n"]}