{"version":3,"sources":["extras/api.js"],"names":[],"mappings":"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","file":"api.js","sourcesContent":["import * as THREE from 'three';\r\nimport * as Physijs from '../physics/index.js';\r\n\r\nimport {JSONLoader, TextureLoader, FontLoader} from '../utils/loaders';\r\n\r\nconst extend = (object, ...extensions) => { // $.extend alternative, ... is the spread operator.\r\n  for (const extension of extensions) {\r\n    // console.log(extension);\r\n    // console.log(typeof extension);\r\n\r\n    if (!extension)\r\n      continue; // Ignore null and undefined objects and paramaters.\r\n\r\n    for (const prop of Object.getOwnPropertyNames(extension)) { // Do not traverse the prototype chain.\r\n      if (object[prop] !== undefined\r\n        && object[prop].toString() === '[object Object]'\r\n        && extension[prop].toString() === '[object Object]')\r\n\r\n        // Goes deep only if object[prop] and extension[prop] are both objects !\r\n        extend(object[prop], extension[prop]);\r\n\r\n      else\r\n        object[prop] = (object[prop] === 0) ? 0 : object[prop];\r\n      if (typeof object[prop] === 'undefined') object[prop] = extension[prop]; // Add values that do not already exist.\r\n    }\r\n  }\r\n\r\n  return object;\r\n};\r\n\r\nconst texture = (url, repeat = {}) => {\r\n  const texture = TextureLoader.load(url);\r\n\r\n  if (repeat) {\r\n    const opt = extend(repeat, {\r\n      offset: {\r\n        x: 0,\r\n        y: 0\r\n      },\r\n      repeat: {\r\n        x: 1,\r\n        y: 1\r\n      }\r\n    });\r\n\r\n    texture.wrapS = texture.wrapT = THREE.RepeatWrapping;\r\n\r\n    texture.offset.set(opt.offset.x, opt.offset.y);\r\n    texture.repeat.set(opt.repeat.x, opt.repeat.y);\r\n\r\n    texture.magFilter = THREE.NearestFilter;\r\n    texture.minFilter = THREE.LinearMipMapLinearFilter;\r\n  }\r\n\r\n  return texture;\r\n};\r\n\r\nconst loadMaterial = (material = {}) => {\r\n  if (typeof material.kind !== 'string')\r\n    console.error('Type of material is undefined or not a string. @loadMaterial');\r\n\r\n  const _restitution = !isNaN(parseFloat(material.restitution)) ?\r\n    material.restitution : !isNaN(parseFloat(material.rest)) ?\r\n    material.rest : 0.3;\r\n\r\n  const _friction = !isNaN(parseFloat(material.friction)) ?\r\n    material.friction : !isNaN(parseFloat(material.fri)) ?\r\n    material.fri : 0.8;\r\n\r\n  let materialThree, materialPhysi;\r\n\r\n  const params = Object.assign({}, material);\r\n\r\n  delete params.kind;\r\n\r\n  delete params.friction;\r\n  delete params.fri;\r\n\r\n  delete params.restitution;\r\n  delete params.rest;\r\n\r\n  delete params.useCustomMaterial;\r\n  delete params.useVertexColors;\r\n\r\n  switch (material.kind) {\r\n    case 'basic':\r\n      materialThree = new THREE.MeshBasicMaterial(params);\r\n      break;\r\n\r\n    case 'linebasic':\r\n      materialThree = new THREE.LineBasicMaterial(params);\r\n      break;\r\n\r\n    case 'linedashed':\r\n      materialThree = new THREE.LineDashedMaterial(params);\r\n      break;\r\n\r\n    case 'material':\r\n      materialThree = new THREE.Material(params);\r\n      break;\r\n\r\n    case 'depth':\r\n      materialThree = new THREE.MeshDepthMaterial(params);\r\n      break;\r\n\r\n    case 'face':\r\n      materialThree = new THREE.MeshFaceMaterial(params);\r\n      break;\r\n\r\n    case 'lambert':\r\n      materialThree = new THREE.MeshLambertMaterial(params);\r\n      break;\r\n\r\n    case 'normal':\r\n      materialThree = new THREE.MeshNormalMaterial(params);\r\n      break;\r\n\r\n    case 'phong':\r\n      materialThree = new THREE.MeshPhongMaterial(params);\r\n      break;\r\n\r\n    case 'points':\r\n      materialThree = new THREE.PointsMaterial(params);\r\n      break;\r\n\r\n    case 'standard':\r\n      materialThree = new THREE.MeshStandardMaterial(params);\r\n      break;\r\n\r\n    case 'pointcloud':\r\n      materialThree = new THREE.PointCloudMaterial(params);\r\n      break;\r\n\r\n    case 'rawshader':\r\n      materialThree = new THREE.RawShaderMaterial(params);\r\n      break;\r\n\r\n    case 'shader':\r\n      materialThree = new THREE.ShaderMaterial(params);\r\n      break;\r\n\r\n    case 'spritecanvas':\r\n      materialThree = new THREE.SpriteCanvasMaterial(params);\r\n      break;\r\n\r\n    case 'sprite':\r\n      materialThree = new THREE.SpriteMaterial(params);\r\n      break;\r\n\r\n    default:\r\n  }\r\n\r\n  if (!!'physics') {\r\n    materialPhysi = Physijs.createMaterial(\r\n      materialThree,\r\n      _friction,\r\n      _restitution\r\n    );\r\n  }\r\n\r\n  return {\r\n    _material: materialThree,\r\n    _materialP: materialPhysi\r\n  };\r\n};\r\n\r\nexport {\r\n  FontLoader,\r\n  JSONLoader,\r\n  TextureLoader,\r\n  texture,\r\n  extend,\r\n  loadMaterial\r\n};\r\n"]}