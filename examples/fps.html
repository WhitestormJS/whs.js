<!doctype html>
<html>

<head>
  <meta charset="utf-8">
  <title>WhitestormJS development</title>
  <script src="../libs/three.js"></script>
  <script src="../libs/cannon.js"></script>
  <script src="../libs/Wagner.js"></script>
  <script src="../libs/Wagner.base.js"></script>

  <script src="../assets/terrain/default_terrain.js"></script>
  <script src="../build/whitestorm.js"></script>
</head>

<body>
<script>
  // NOTE: Make person bigger 10 times

  var GAME = new WHS.init({
    anaglyph: false,
    //helper: true,
    stats: "fps", // fps, ms, mb
    wagner: WAGNER,
    autoresize: true,

    gravity: {
      x: 0,
      y: -100,
      z: 0
    },

    camera: {
      far: 10000
    },

    rWidth: window.innerWidth / 1.5,
    rHeight: window.innerHeight / 1.5,

    background: 0x70DBFF
  });

  GAME.ground = GAME.addGround("terrain", {
    terrain: defaultTerrainMap,
    depth: 100,
    width: 256,
    height: 256
    //useDeafultMaterial: false
    //detality:1
  }, {
    color: 0xff0000,
    side: THREE.DoubleSide,
    kind: "basic"
  }, {
    x: 0,
    y: 0,
    z: 0
  });

  // NOTE: Default light.
  GAME.light1 = GAME.addLight("directional", {
    color: 0xffffff, //0x00ff00,
    intensity: 1
  }, {
    x: 80, // 100,
    y: 110, // 30,
    z: 80, // 100
  }, {
    x: 0,
    y: 0,
    z: 0
  });

  /*GAME.light1 = GAME.addLight("point", {
    color: 0xffffff, //0x00ff00,
    intensity: 0.8
  }, {
    x: 100, // 100,
    y: 110, // 30,
    z: 100, // 100
  }, {
    x: 0,
    y: 0,
    z: 0
  });*/


  // NOTE: Default light.
  /*GAME.light1 = GAME.addLight("directional", {
    color: 0xffffff, //0x00ff00,
    intensity: 1
  }, {
    x: 70, // 100,
    y: 70, // 30,
    z: 70, // 100
  }, {
    x: 70,
    y: 72,
    z: 70
  });*/

  GAME.parrot = GAME.addMorph("assets/models/morph/parrot.js", {
  geometryOptions: {
      width: 2,
      height: 2,
      depth: 2
  },
  materialOptions: {
      color: 0xffffff,
      kind: "basic",
      map: WHS.API.texture('assets/textures/box.jpg')
  },
  pos: {
      x: 70,
      y: 72,
      z: 70
  },
  morph: {
    duration: 0.5,
    speed: 250
  }
});

  // NOTE: Test light.
  /*GAME.light2 = GAME.addLight("point", {
    color: 0xffffff,
    intensity: 4,
    distance: 1
  }, {
    x: 100, //  100,
    y: 110, //  30,
    z: 100, //  100
  }, {
    x: 0,
    y: 0,
    z: 0
  });*/

  // NOTE: Test light.
  /*GAME.light2 = GAME.addLight("ambient", {
    color: 0xffffff
  }, {
    x: 100, //  100,
    y: 30, //  30,
    z: 100, //  100
  }, {
    x: 0,
    y: 0,
    z: 0
  });*/

  GAME.fog = GAME.addFog("fogexp2", {
    hex: 0x777777,
    near: 0.015,
    far: 250,
    density: 0.015
  });

  GAME.cube = GAME.addObject("cube",
  {
      geometryOptions: {
          width: 2,
          height: 2,
          depth: 2
      },
      mass: 5,
      onlyvis: false,
      materialOptions: {
          color: 0xffffff,
          kind: "basic",
          map: WHS.API.texture('assets/textures/box.jpg')
      },
      pos: {
          x: 60,
          y: 370,
          z: 60
      }
  });

  GAME.cube = GAME.addObject("cube",
  {
      geometryOptions: {
          width: 2,
          height: 2,
          depth: 2
      },
      mass: 5,
      onlyvis: false,
      materialOptions: {
          color: 0xffffff,
          kind: "basic",
          map: WHS.API.texture('assets/textures/box.jpg')
      },
      pos: {
          x: 60,
          y: 400,
          z: 0
      }
  });

  GAME.person = GAME.addObject("sphere", {
    geometryOptions: {
      radius: 3
    },
    mass: 10,
    onlyvis: false,
    materialOptions: {
      color: 0xffffff,
      kind: "lambert"
    },
    pos: {
      x: 0,
      y: 400,
      z: 0
    }
  });

  GAME.zoomEffect = GAME.addWagner(WAGNER, "zoomBlurPass", {}).apply();
  GAME.multipassEffect = GAME.addWagner(WAGNER, "vignettePass", {}).apply();
  GAME.directionalblurEffect = GAME.addWagner(WAGNER, "motionBlurPass", {}).apply();

  GAME.MakeFirstPerson(GAME.person, PointerLockControls, '#blocker'); // *WHS* object, Pointer lock controls object, Jquery blocker div selector.

  var grasscoords = [];

  for (var x = 0; x < 20; x++) {
    for (var y = 0; y < 15; y++) {
      /*grasscoords.push({
        x: x,
        y: y
      });*/

    }
  }

  GAME.ground._state.done(function() {
   console.log('Terrain loaded!');
  });

/*
  console.log(WHS.API.getheight({
        x: 0,
        y: 0
      }, -500, GAME.ground, -1));

  GAME.addGrass(GAME.ground, {
    coords: grasscoords
  });*/


  //GAME.person.addCompoundFace();
</script>
</body>

</html>
